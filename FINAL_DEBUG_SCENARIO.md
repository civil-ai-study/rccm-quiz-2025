# 🎯 最終デバッグシナリオ - 専門分野問題混在修正

## 📋 問題の正確な整理

### 元々の問題（1ヶ月前から）
- **13部門の4-2専門分野問題が混在**
- 道路部門を選んでも他の部門の問題が出てくる
- 専門分野の分離ができていない

### 軽量版作成の目的
- **専門分野分離の修正**を軽量版で実装
- 軽量版で正しく動作確認
- 動作確認後に完全版に統合

## 🎯 最終目標
**13部門すべてで正しい専門分野の問題のみが出題される**

## 📝 デバッグシナリオ手順

### Phase 1: 軽量版での専門分野分離テスト
1. **ローカル軽量版起動確認**
   - http://127.0.0.1:5005 でアクセス可能か
   - 13部門リスト表示確認

2. **各部門の問題分離テスト**
   - 道路部門 → 道路問題のみ出題確認
   - 河川部門 → 河川問題のみ出題確認
   - 都市計画部門 → 都市計画問題のみ出題確認
   - 全13部門で個別確認

3. **問題混在チェック**
   - 道路部門で河川問題が出ないか確認
   - 各部門で他部門の問題が混入していないか確認

### Phase 2: 軽量版修正（問題発見時）
1. **問題データ分離コード確認**
   - 4-2_YYYY.csv ファイル読み込み部分
   - 部門別フィルタリング機能

2. **修正実行**
   - 専門分野分離ロジック修正
   - テスト実行で確認

### Phase 3: 軽量版動作確認後の統合
1. **軽量版完全動作確認**
   - 全13部門で正しい問題分離
   - 10問完走テスト成功

2. **完全版への統合**
   - 軽量版の修正を完全版に適用
   - 完全版デプロイ

## 🔍 現在の状況
- ローカル軽量版: 起動中（http://127.0.0.1:5005）
- 本番環境: 軽量版稼働中（問題混在の可能性）
- 完全版: デプロイ未反映

## 📊 成功基準
- [ ] ローカル軽量版で13部門正しく分離
- [ ] 各部門10問完走成功
- [ ] 問題混在ゼロ確認
- [ ] 本番環境反映成功

## ⚠️ 注意事項
- **軽量版で修正確認後に統合** - いきなり完全版修正しない
- **1つずつ確実に確認** - 推測や飛び越しをしない
- **CLAUDE.mdに記録** - 進捗と結果を必ず記録

---

**次のアクション**: ローカル軽量版の専門分野分離テスト開始
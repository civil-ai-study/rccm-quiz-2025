// static/js/exam.js - å•é¡Œãƒšãƒ¼ã‚¸å°‚ç”¨JavaScript\n/**\n * RCCMå­¦ç¿’ã‚¢ãƒ—ãƒª - å•é¡Œãƒšãƒ¼ã‚¸æ©Ÿèƒ½\n * ãƒªãƒ³ã‚¿ãƒ¼ã‚¨ãƒ©ãƒ¼è§£æ¶ˆç‰ˆ\n */\n\nlet startTime = Date.now();\nlet questionId; // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦å®šç¾©\n\nfunction selectOption(option) {\n    // æ—¢å­˜ã®é¸æŠã‚’è§£é™¤\n    document.querySelectorAll('.option-item').forEach(item => {\n        item.classList.remove('selected');\n    });\n    \n    // æ–°ã—ã„é¸æŠã‚’è¨­å®š\n    const selectedItem = event.currentTarget;\n    selectedItem.classList.add('selected');\n    document.getElementById('option' + option).checked = true;\n    document.getElementById('submitBtn').disabled = false;\n    \n    // é¸æŠåŠ¹æœéŸ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n    selectedItem.style.transform = 'scale(1.02)';\n    setTimeout(() => {\n        selectedItem.style.transform = '';\n    }, 150);\n}\n\nfunction initializeQuiz(qId) {\n    questionId = qId;\n    \n    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†\n    const examForm = document.getElementById('examForm');\n    if (examForm) {\n        examForm.addEventListener('submit', function(e) {\n            const selected = document.querySelector('input[name=\"answer\"]:checked');\n            if (!selected) {\n                e.preventDefault();\n                alert('é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚');\n                return;\n            }\n            \n            // çµŒéæ™‚é–“ã‚’è¨ˆç®—\n            const elapsedSeconds = (Date.now() - startTime) / 1000;\n            document.getElementById('elapsedTime').value = elapsedSeconds.toFixed(1);\n            \n            // ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã‚’æ›´æ–°\n            if (typeof updateStreak === 'function') {\n                updateStreak();\n            }\n            \n            // é€ä¿¡ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹å¤‰æ›´\n            const btn = document.getElementById('submitBtn');\n            btn.innerHTML = 'â³ åˆ¤å®šä¸­...';\n            btn.disabled = true;\n            \n            // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³\n            btn.style.transform = 'scale(0.95)';\n            setTimeout(() => {\n                btn.style.transform = '';\n            }, 200);\n        });\n    }\n    \n    // é¸æŠè‚¢ã«ãƒ›ãƒãƒ¼åŠ¹æœã®ãŸã‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ \n    document.querySelectorAll('.option-item').forEach(item => {\n        item.addEventListener('mouseenter', function() {\n            if (!this.classList.contains('selected')) {\n                this.style.transform = 'translateX(5px)';\n            }\n        });\n        \n        item.addEventListener('mouseleave', function() {\n            if (!this.classList.contains('selected')) {\n                this.style.transform = '';\n            }\n        });\n    });\n    \n    // ã—ãŠã‚ŠçŠ¶æ…‹ã®ç¢ºèªã¨è¨­å®š\n    if (typeof checkBookmarkStatus === 'function' && checkBookmarkStatus(questionId)) {\n        const bookmarkBtn = document.getElementById('bookmarkBtn');\n        if (bookmarkBtn) {\n            bookmarkBtn.innerHTML = 'âœ… ç™»éŒ²æ¸ˆã¿';\n            bookmarkBtn.disabled = true;\n            bookmarkBtn.classList.remove('btn-outline-warning');\n            bookmarkBtn.classList.add('btn-success');\n        }\n    }\n    \n    // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ\n    document.addEventListener('keydown', function(e) {\n        // 1-4ã‚­ãƒ¼ã§é¸æŠè‚¢é¸æŠ\n        if (e.key >= '1' && e.key <= '4') {\n            const options = ['A', 'B', 'C', 'D'];\n            const optionIndex = parseInt(e.key) - 1;\n            if (optionIndex < options.length) {\n                const optionElement = document.querySelector(\`.option-item:nth-child(${optionIndex + 1})\`);\n                if (optionElement) {\n                    optionElement.click();\n                }\n            }\n        }\n        \n        // Enterã‚­ãƒ¼ã§è§£ç­”é€ä¿¡\n        if (e.key === 'Enter' && !document.getElementById('submitBtn').disabled) {\n            document.getElementById('examForm').submit();\n        }\n        \n        // Bã‚­ãƒ¼ã§ã—ãŠã‚Šç™»éŒ²\n        if (e.key === 'b' || e.key === 'B') {\n            const bookmarkBtn = document.getElementById('bookmarkBtn');\n            if (bookmarkBtn && !bookmarkBtn.disabled) {\n                bookmarkBtn.click();\n            }\n        }\n    });\n    \n    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³\n    const progressBadge = document.querySelector('.badge.bg-primary');\n    if (progressBadge) {\n        progressBadge.style.opacity = '0';\n        progressBadge.style.transform = 'scale(0.8)';\n        \n        setTimeout(() => {\n            progressBadge.style.transition = 'all 0.5s ease';\n            progressBadge.style.opacity = '1';\n            progressBadge.style.transform = 'scale(1)';\n        }, 300);\n    }\n    \n    // å­¦ç¿’æ”¯æ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n    console.log('ğŸ’¡ å­¦ç¿’ã®ã‚³ãƒ„: é¸æŠè‚¢ã‚’æ¶ˆå»æ³•ã§çµã‚Šè¾¼ã¿ã€æ ¹æ‹ ã‚’æŒã£ã¦è§£ç­”ã—ã¾ã—ã‚‡ã†');\n    console.log('âŒ¨ï¸ ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: 1-4ã‚­ãƒ¼ã§é¸æŠè‚¢é¸æŠã€Enterã‚­ãƒ¼ã§è§£ç­”é€ä¿¡ã€Bã‚­ãƒ¼ã§å¾©ç¿’ç™»éŒ²');\n}\n\n// ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º\nfunction updateTimer() {\n    const elapsed = Math.floor((Date.now() - startTime) / 1000);\n    const minutes = Math.floor(elapsed / 60);\n    const seconds = elapsed % 60;\n    const timerText = \`${minutes}:${seconds.toString().padStart(2, '0')}\`;\n    \n    const timerElement = document.getElementById('timer');\n    if (timerElement) {\n        timerElement.textContent = timerText;\n    }\n}\n\n// 1ç§’ã”ã¨ã«ã‚¿ã‚¤ãƒãƒ¼æ›´æ–°\nsetInterval(updateTimer, 1000);\n\n// ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å…¬é–‹\nwindow.selectOption = selectOption;\nwindow.initializeQuiz = initializeQuiz; 